# Global rules for building dll unit tests     -*-Makefile-*-
#
# Each individual makefile should define the following variables:
# TESTDLL      : the dll to test
# C_SRCS       : list of C test programs
# EXTRADEFS    : extra symbol definitions, like -DWINELIB (optional)
#
# plus all variables required by the global Make.rules.in
#

DLLFLAGS     = @DLLFLAGS@
TESTMODULE   = $(TESTDLL:%.dll=%)_test.exe
WINETEST_RES = $(top_builddir)/programs/winetest/$(TESTDLL:%.dll=%)_test.res
EXTRA_OBJS   = testlist.o
MAKEDEPFLAGS = -xo -xcross.o

all: $(TESTMODULE)$(DLLEXT) $(WINETEST_RES)

check test: $(C_SRCS:.c=.ok)

crosstest: @CROSSTEST_DISABLE@ $(TESTDLL:%.dll=%)_crosstest.exe

.PHONY: check test crosstest

@MAKE_RULES@
